# kaiheila-sdk-EL
开黑啦机器人 易语言 SDK

## 说明
---
> ~~由于易语言在 WebSocket 上的支持较差，因此暂时不推荐使用 ws 模板(但是由于ws模板是二合一，因此也可以参考进行修改！)~~

> 替换了更加好的WinHttp组件来适配WebSocket模板，现在可以做到更加完善的兼容啦。

> 没错，除了提供易语言格式的封装，依旧按照传统提供了文本文档的简易对照版，便于三方开发对照试验。

## 更新介绍
> 2021.1.23 `v0.0.4.3` 适配CardMessage
1. 适配CardMessage生成

> 2021.1.22 `v0.0.4.1`&`v0.0.4.2`  增加bilibili示例程序 
1. 增加 asset/create 资源上传接口
2. 修改部分错误引言和参数
3. 增加 guild-role 接口
4. 为 role 铺设专用的转换函数

> 2021.1.20 `v0.0.4` 增加接口，强化主从Bot机制
1. 修改部分代码 => bot 的口令获取方式
2. 增加user/me 接口
3. 增加了初始化部分，获取主机器人基本信息（从机器人信息暂不获取，采取提供veriy token换token形式进行发送。 

> 2021.1.19 增加模板
1. 适配了基于`WinHttp`的WebSokcet模板 *WinHttp需要基于Windows10相关环境，因此并不支持WIn7及以下系统。*
2. 暂时放弃适配基于`鱼刺WSS`的模板 *该模块启用wss需要收费，且频繁出现连接失败的BUG*



## 模板介绍
---
> keihaika-sdk-EL
（基于 WebHook）

使用 WebHook 链接接收消息，使用v3 API发送或提交消息

1. 请在开黑啦机器人概况中选择连接模式为 WebHook
2. 设置回调地址为 `http://你的公网IP或域名:19730/?compress=0`
3. 在模板的初始化的g_token内填写在机器人概括中的token

### 优点：
1. 支持多机器人同时链接同一个后端，且支持简单的负载均衡（对消息进行谁收到谁优先响应，且对同一个消息不进行多次收取。）
2. 已经提供1个完整的消息示例
3. 推荐使用 uTools 的内网穿透模式进行调试，使用socket模式！
4. 采用队列处理消息


> keihaika-sdk-EL-WinHttp
（基于 WebHook+WebSocket）

使用 WebSocket 链接或 WebHook 接收消息，使用v3 API发送或提交消息。
1. 请在开黑啦机器人概况中选择连接模式为 WebSocket
2. 在模板的初始化的g_token内填写在机器人概括中的token

### 优点：
1. 支持双通道链接服务器，但是WebHook需要有公网IP才可接收消息，ws不需要
2. 提供了更加稳定的ws链接

> demo/bilibili(`线上机器人：开播啦` **部分源码**)
1. 请务必遵守B站接口风控阈值规范，切勿浪。

## 模块介绍
---
> 精易模块

精益论坛 bbs.125.la 老牌全功能模块，提供 json相关操作

> 菜鸟开发模块

主要提供文本相关操作

## 技术支持
---
1. `开黑啦机器人开发中心`提供的机器人相关服务 https://developer.kaiheila.cn/
2. `精益论坛`提供的开发技术援助 bbs.125.la
3. `伏羲科技R3实验室`提供的开发技术支持 FXSLB
4. 大型文字类网游游戏`《灵恸Ⅱ 重制版》`项目组提供的队列、线程等技术支持